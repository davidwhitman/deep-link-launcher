dependencies:
  pre:
    - cp -r "ci/licenses/" "/usr/local/android-sdk-linux/"
  cache_directories:
    - ~/.android

test:
  override:
    # Run unit tests
    - ./gradlew testDebugUnitTest
    # Copy the test results to the test results dir
    - cp -r app/build/test-results/testDebugUnitTest/* $CIRCLE_TEST_REPORTS

    # Build debug apk. If a unit test has failed, we won't get to this step
    - ./gradlew assembleDebug
    # Copy apk file to CircleCI artifacts dir
    - cp -r app/build/outputs $CIRCLE_ARTIFACTS